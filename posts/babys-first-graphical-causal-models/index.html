<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.9">
    <title>Baby's first graphical causal models—ColEx</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,700,400italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="../../css/default.css" />
    <link rel="icon" href="../../images/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon" />
    <script>
     if (!location.host.startsWith('localhost')) {
       var _rollbarConfig = {
         checkIgnore: function(isUncaught, args, payload) {
           return location.host.startsWith('localhost')
         },
         accessToken: "137e3ab64049469ba4a7d5e13a6f5aeb",
         captureUncaught: true,
         payload: {
           environment: "production"
         }
       };
       !function(r){function o(n){if(e[n])return e[n].exports;var t=e[n]={exports:{},id:n,loaded:!1};return r[n].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}var e={};return o.m=r,o.c=e,o.p="",o(0)}([function(r,o,e){"use strict";var n=e(1),t=e(4);_rollbarConfig=_rollbarConfig||{},_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||"https://cdnjs.cloudflare.com/ajax/libs/rollbar.js/2.3.1/rollbar.min.js",_rollbarConfig.async=void 0===_rollbarConfig.async||_rollbarConfig.async;var a=n.setupShim(window,_rollbarConfig),l=t(_rollbarConfig);window.rollbar=n.Rollbar,a.loadFull(window,document,!_rollbarConfig.async,_rollbarConfig,l)},function(r,o,e){"use strict";function n(r){return function(){try{return r.apply(this,arguments)}catch(r){try{console.error("[Rollbar]: Internal error",r)}catch(r){}}}}function t(r,o){this.options=r,this._rollbarOldOnError=null;var e=s++;this.shimId=function(){return e},window&&window._rollbarShims&&(window._rollbarShims[e]={handler:o,messages:[]})}function a(r,o){var e=o.globalAlias||"Rollbar";if("object"==typeof r[e])return r[e];r._rollbarShims={},r._rollbarWrappedError=null;var t=new p(o);return n(function(){o.captureUncaught&&(t._rollbarOldOnError=r.onerror,i.captureUncaughtExceptions(r,t,!0),i.wrapGlobals(r,t,!0)),o.captureUnhandledRejections&&i.captureUnhandledRejections(r,t,!0);var n=o.autoInstrument;return(void 0===n||n===!0||"object"==typeof n&&n.network)&&r.addEventListener&&(r.addEventListener("load",t.captureLoad.bind(t)),r.addEventListener("DOMContentLoaded",t.captureDomContentLoaded.bind(t))),r[e]=t,t})()}function l(r){return n(function(){var o=this,e=Array.prototype.slice.call(arguments,0),n={shim:o,method:r,args:e,ts:new Date};window._rollbarShims[this.shimId()].messages.push(n)})}var i=e(2),s=0,d=e(3),c=function(r,o){return new t(r,o)},p=d.bind(null,c);t.prototype.loadFull=function(r,o,e,t,a){var l=function(){var o;if(void 0===r._rollbarDidLoad){o=new Error("rollbar.js did not load");for(var e,n,t,l,i=0;e=r._rollbarShims[i++];)for(e=e.messages||[];n=e.shift();)for(t=n.args||[],i=0;i<t.length;++i)if(l=t[i],"function"==typeof l){l(o);break}}"function"==typeof a&&a(o)},i=!1,s=o.createElement("script"),d=o.getElementsByTagName("script")[0],c=d.parentNode;s.crossOrigin="",s.src=t.rollbarJsUrl,e||(s.async=!0),s.onload=s.onreadystatechange=n(function(){if(!(i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){s.onload=s.onreadystatechange=null;try{c.removeChild(s)}catch(r){}i=!0,l()}}),c.insertBefore(s,d)},t.prototype.wrap=function(r,o,e){try{var n;if(n="function"==typeof o?o:function(){return o||{}},"function"!=typeof r)return r;if(r._isWrap)return r;if(!r._rollbar_wrapped&&(r._rollbar_wrapped=function(){e&&"function"==typeof e&&e.apply(this,arguments);try{return r.apply(this,arguments)}catch(e){var o=e;throw"string"==typeof o&&(o=new String(o)),o._rollbarContext=n()||{},o._rollbarContext._wrappedSource=r.toString(),window._rollbarWrappedError=o,o}},r._rollbar_wrapped._isWrap=!0,r.hasOwnProperty))for(var t in r)r.hasOwnProperty(t)&&(r._rollbar_wrapped[t]=r[t]);return r._rollbar_wrapped}catch(o){return r}};for(var u="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,captureDomContentLoaded,captureLoad".split(","),f=0;f<u.length;++f)t.prototype[u[f]]=l(u[f]);r.exports={setupShim:a,Rollbar:p}},function(r,o){"use strict";function e(r,o,e){if(r){var t;"function"==typeof o._rollbarOldOnError?t=o._rollbarOldOnError:r.onerror&&!r.onerror.belongsToShim&&(t=r.onerror,o._rollbarOldOnError=t);var a=function(){var e=Array.prototype.slice.call(arguments,0);n(r,o,t,e)};a.belongsToShim=e,r.onerror=a}}function n(r,o,e,n){r._rollbarWrappedError&&(n[4]||(n[4]=r._rollbarWrappedError),n[5]||(n[5]=r._rollbarWrappedError._rollbarContext),r._rollbarWrappedError=null),o.handleUncaughtException.apply(o,n),e&&e.apply(r,n)}function t(r,o,e){if(r){"function"==typeof r._rollbarURH&&r._rollbarURH.belongsToShim&&r.removeEventListener("unhandledrejection",r._rollbarURH);var n=function(r){var e=r.reason,n=r.promise,t=r.detail;!e&&t&&(e=t.reason,n=t.promise),o&&o.handleUnhandledRejection&&o.handleUnhandledRejection(e,n)};n.belongsToShim=e,r._rollbarURH=n,r.addEventListener("unhandledrejection",n)}}function a(r,o,e){if(r){var n,t,a="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(n=0;n<a.length;++n)t=a[n],r[t]&&r[t].prototype&&l(o,r[t].prototype,e)}}function l(r,o,e){if(o.hasOwnProperty&&o.hasOwnProperty("addEventListener")){for(var n=o.addEventListener;n._rollbarOldAdd&&n.belongsToShim;)n=n._rollbarOldAdd;var t=function(o,e,t){n.call(this,o,r.wrap(e),t)};t._rollbarOldAdd=n,t.belongsToShim=e,o.addEventListener=t;for(var a=o.removeEventListener;a._rollbarOldRemove&&a.belongsToShim;)a=a._rollbarOldRemove;var l=function(r,o,e){a.call(this,r,o&&o._rollbar_wrapped||o,e)};l._rollbarOldRemove=a,l.belongsToShim=e,o.removeEventListener=l}}r.exports={captureUncaughtExceptions:e,captureUnhandledRejections:t,wrapGlobals:a}},function(r,o){"use strict";function e(r,o){this.impl=r(o,this),this.options=o,n(e.prototype)}function n(r){for(var o=function(r){return function(){var o=Array.prototype.slice.call(arguments,0);if(this.impl[r])return this.impl[r].apply(this.impl,o)}},e="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,_createItem,wrap,loadFull,shimId,captureDomContentLoaded,captureLoad".split(","),n=0;n<e.length;n++)r[e[n]]=o(e[n])}e.prototype._swapAndProcessMessages=function(r,o){this.impl=r(this.options);for(var e,n,t;e=o.shift();)n=e.method,t=e.args,this[n]&&"function"==typeof this[n]&&("captureDomContentLoaded"===n||"captureLoad"===n?this[n].apply(this,[t[0],e.ts]):this[n].apply(this,t));return this},r.exports=e},function(r,o){"use strict";r.exports=function(r){return function(o){if(!o&&!window._rollbarInitialized){r=r||{};for(var e,n,t=r.globalAlias||"Rollbar",a=window.rollbar,l=function(r){return new a(r)},i=0;e=window._rollbarShims[i++];)n||(n=e.handler),e.handler._swapAndProcessMessages(l,e.messages);window[t]=n,window._rollbarInitialized=!0}}}}]);
     }
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113913768-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-113913768-1');
    </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          displayAlign: "left",
          displayIndent: "2em"
        });
    </script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_SVG"></script>

    
  <link rel="stylesheet" type="text/css" href="../../css/causal-graphs.css" />


  <meta name="description" content="We can describe causal models with directed graphs. The graph
perspective allows us to specify precise procedures for determining when
variables (vertices) are independent (d-separated) and dependent
(d-connected).">

</head>
<body>
<div id="underlay">
<nav><a href="../../">Home</a></nav>
<main><article>
  <h2 id="article-title">Baby's first graphical causal models</h2>
  
  <div class="metadata">
  <nav class="tags"><ul>
    
      <li><a href="../../tag/causality/">causality</a></li>
    
      <li><a href="../../tag/interactive/">interactive</a></li>
    
</ul></nav>

  
    <nav><a class="series" href="../../series/Graphical%2520causal%2520models/">Series: Graphical causal models</a></nav>
  
  <span class="date">Published on <time datetime="2019-06-13">June 13, 2019</time>.</span>
  
  </div>
  
  
    <div class="abstract">
      <p>We can describe causal models with directed graphs. The graph perspective allows us to specify precise procedures for determining when variables (vertices) are independent (d-separated) and dependent (d-connected).</p>
    </div>
  

  
    <aside class="sidenote" id="warnings">Warnings: <ul>
      
        <li><details><summary>Lies, damn lies, and statistics</summary><p>I've made an important simplification in all the discussion so far by omitting the possibility of conditioning on variables. Being able to talk about conditioning on variables makes the analysis much more interesting and useful, but it seem pedagogically preferable to talk about the simplest setting first.</p></details></li>
      
    </ul></aside>
  

  <h3 id="causal-graphs">Causal graphs</h3>
<p>We can represent causal models as directed <a href="https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)">graphs</a>. The vertices in the graph represent different variables—causes and effects—and the edges represent causal relationships. For example:</p>
<figure>
<img src="../../images/smoking-graph.svg" alt="Smoking is causally associated with both lung cancer and yellow fingers" id="smoking-graph" /><figcaption>Smoking is causally associated with both lung cancer and yellow fingers</figcaption>
</figure>
<p>Some technical details:</p>
<ul>
<li>These graphs must be <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph">acyclic</a>. In a strict sense, something can’t be both a cause and an effect of something else. Thing A at time 1 can effect thing B at time 2 which affects thing A at time 3. Causation only flows forward in time and time is acyclic.</li>
<li>A <a href="https://en.wikipedia.org/wiki/Path_(graph_theory)">path</a> on a directed graph is a sequence of edges joining a sequence of vertices. We can ignore direction of the edges when forming a path.</li>
</ul>
<h3 id="causal-triplets">Causal triplets</h3>
<p>Now that we’ve presented the basic idea of modeling causal systems with graphs, we can start to use graphs as a tool to analyze causal models. We’ll start by looking at the smallest interesting part of a graph—a triplet consisting of three vertices and two edges. Such a triplet can be configured in one of <span class="noted">three ways</span><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. We give a name to each triplet and to the center vertex in each triplet.</p>
<dl>
<dt><a href="#key-terms">Chains</a></dt>
<dd>Chains are the most straightforward. If A causes B and B causes C (A → B → C), <span class="noted">then A causes C</span><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. We call the central vertex B a mediator or a traverse. For example, if smoking causes (increased risk of) cancer and cancer causes (increased risk of) death, then smoking causes (increased risk of) death.
</dd>
<dt><a href="#key-terms">Forks</a></dt>
<dd>The next possible triplet configuration is what we call a fork. If B causes both A and C (A ← B → C), then A and C will not be independent in light of their common cause. For example, if smoking causes both yellowed fingers and lung cancer, we’d expect lung cancer and yellowed fingers to be correlated.
</dd>
<dt><a href="#key-terms">Inverted forks</a></dt>
<dd>The final possible triplet configuration is what we call an inverted fork. If A causes B and C causes B (A → B ← C), then A and C will be independent. We call the central vertex B a <a href="#key-terms">collider</a>. For example, if smoking causes lung cancer and exposure to high doses of radiation also causes lung cancer, we wouldn’t expect smoking and exposure to high doses of radiation to be correlated.
</dd>
</dl>
<figure id="triplets-table">
<figcaption>
Types of causal triplets
</figcaption>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Name of triplet</th>
<th style="text-align: left;">Name of central vertex</th>
<th style="text-align: left;">Diagram</th>
<th style="text-align: left;">Ends (A and C) dependent?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Chain</td>
<td style="text-align: left;">Mediator/Traverse</td>
<td style="text-align: left;">A → B → C</td>
<td style="text-align: left;">Causally (probably)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fork</td>
<td style="text-align: left;">Confounder/Common cause</td>
<td style="text-align: left;">A ← B → C</td>
<td style="text-align: left;">Noncausally</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Inverted fork</td>
<td style="text-align: left;">Collider</td>
<td style="text-align: left;">A → B ← C</td>
<td style="text-align: left;">No</td>
</tr>
</tbody>
</table>
</figure>
<p>So we can determine the causal and non-causal dependence between three factors by turning them into a causal graph and looking at the configuration of the edges.</p>
<!--more-->
<h3 id="d-separation-and-d-connection-along-a-path">d-separation and d-connection along a path</h3>
<p>But that’s not terribly useful in a world overflowing with causes, effects and connections. We need to be able to work with bigger graphs. Our next step on that route is to look at arbitrary paths and determine their dependence. The terms used for this are <a href="#key-terms">d-separation</a> and <a href="#key-terms">d-connection</a>. “When we say that a pair of nodes are d-separated, we mean that the variables they represent are definitely independent; when we say that a pair of nodes are d-connected, we mean that they are possibly, or most likely, <span class="noted">dependent</span><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.” <span class="citation" data-cites="pearl2016causal">(Pearl, Glymour, and Jewell <a href="#ref-pearl2016causal" role="doc-biblioref">2016</a>)</span></p>
<p>Two vertices on a path are d-connected if they have no colliders between them. So A and D are d-connected in each of:</p>
<ul>
<li>A → B → C → D</li>
<li>A ← B → C → D</li>
<li>A ← B ← C → D</li>
<li>A ← B ← C ← D</li>
</ul>
<p>A and D are d-separated in each of:</p>
<ul>
<li>A → B ← C ← D</li>
<li>A → B ← C → D</li>
<li>A → B → C ← D</li>
<li>A ← B → C ← D</li>
</ul>
<p>I hope the intuition behind this is clear as a fairly straightforward extension of the logic explained with causal triplets.</p>
<p>We also call a path with a collider on it a <a href="#key-terms">blocked path</a>.</p>
<h3 id="d-separation-and-d-connection-on-arbitrary-graphs">d-separation and d-connection on arbitrary graphs</h3>
<p>But linear paths still aren’t that useful. It’s only when we get to full arbitrary graphs that we start to be able to make interesting claims.</p>
<p>In arbitrary graphs, we say that any two vertices are d-connected if they have an undirected path between them which is not blocked (i.e. does not have a collider). If there are no such paths (i.e. there are no paths at all or all paths have a collider), the two vertices are d-separated.</p>
<h4 id="interactive">Interactive</h4>
<p>To get more of a feeling for these terms, you can fiddle with the widget below.</p>
<p>In the top text area, you can specify a graph as a series of vertices with the edges they point to. So the starting text should be read as “a points to b. b points to nothing. c points to a and b. d points to b”. The graph rendered next to it to help you visualize should update once you defocus the text area.</p>
<p>Below the text area, you can ask whether and how any two nodes are d-connected. If they are d-connected, the connecting paths will be highlighted and the paths will be listed.</p>
<p>Finally, the full list of d-separations is always displayed for the current graph.</p>
<hr id="widget-hr">
<div id="spec-and-render">
<textarea id="graph-spec">
a:
  - b
b:
  []
c:
  - a
  - b
d:
  - b
</textarea>
<div id="graph-svg">

</div>
</div>
<div id="graph-error">

</div>
<div class="analysis-panel">
<div class="analysis-header">
D-separations:
</div>
<div id="d-separation-results">

</div>
</div>
<div class="analysis-panel">
<div class="analysis-header">
How are <input id="d-connection-from" type="text" /> and <input id="d-connection-to" type="text" /> d-connected?
</div>
<div id="d-connection-result">

</div>
</div>
<h3 id="aside">Aside</h3>
<p>There are several other fairly effective, fairly short introductions to causal graphical models if this one isn’t doing it for you:</p>
<ul>
<li><a href="http://www.michaelnielsen.org/ddi/if-correlation-doesnt-imply-causation-then-what-does/">If correlation doesn’t imply causation, then what does?</a></li>
<li><span class="citation" data-cites="rohrer2018thinking">(Rohrer <a href="#ref-rohrer2018thinking" role="doc-biblioref">2018</a>)</span></li>
</ul>
<hr class="references">
<div id="refs" class="references" role="doc-bibliography">
<div id="ref-pearl2016causal">
<p>Pearl, Judea, Madelyn Glymour, and Nicholas P Jewell. 2016. <em>Causal Inference in Statistics: A Primer</em>. John Wiley &amp; Sons.</p>
</div>
<div id="ref-rohrer2018thinking">
<p>Rohrer, Julia M. 2018. “Thinking Clearly About Correlations and Causation: Graphical Causal Models for Observational Data.” <em>Advances in Methods and Practices in Psychological Science</em> 1 (1). SAGE Publications Sage CA: Los Angeles, CA: 27–42.</p>
</div>
</div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Why three? We have two slots for a directed edge and in each slot an edge can point one of two ways. That creates four options (A ← B ← C; A → B → C; A ← B → C; A → B ← C), but the first two are symmetrical so we don’t bother to distinguish between them.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩</a></p></li>
<li id="fn2" role="doc-endnote"><p>See <span class="citation" data-cites="pearl2016causal">(Pearl, Glymour, and Jewell <a href="#ref-pearl2016causal" role="doc-biblioref">2016</a>)</span> and “intransitive dependence” for the rare cases where this doesn’t apply.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩</a></p></li>
<li id="fn3" role="doc-endnote"><p>The ‘d’ in d-separated and d-connected stands for “directional” according to most people. But at least <a href="https://www.andrew.cmu.edu/user/scheines/tutor/d-sep.html">one place</a> says it stands for “dependence” which I think is much more intuitive.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩</a></p></li>
</ol>
</section>
</article></main>

</div>

<div id="overlay" class="inactive"><div id="key-terms">
<dl>
<dt>Chains</dt>
<dd>A → B → C
</dd>
<dt>Forks</dt>
<dd>A ← B → C
</dd>
<dt>Inverted forks</dt>
<dd>A → B ← C
</dd>
<dt>Collider</dt>
<dd>The central node that the two causes on either side point to in an inverted fork.
</dd>
<dt>d-separation</dt>
<dd>If a pair of vertices is d-separated, they are independent.
</dd>
<dt>d-connection</dt>
<dd>If a pair of vertices is d-connected, they are (most likely) dependent.
</dd>
<dt>Blocked path</dt>
<dd>A blocked path has a collider on it.
</dd>
</dl>
</div></div>




<script defer type="text/javascript" src="../../js/custom-elements.js"></script>

<script defer type="text/javascript" src="../../js/vendors~arg-map~custom-elements~util-egal.js"></script>


<script defer type="text/javascript" src="../../js/causal-graphs.js"></script>


  </body>
</html>
