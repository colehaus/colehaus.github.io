!function(e){function t(t){for(var n,c,i=t[0],l=t[1],s=t[2],d=0,p=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&p.push(o[c][0]),o[c]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,s||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var l=r[i];0!==o[l]&&(n=!1)}n&&(a.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},o={4:0},a=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;a.push([164,2]),r()}({1:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return a})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return l})),r.d(t,"i",(function(){return u})),r.d(t,"j",(function(){return y})),r.d(t,"k",(function(){return h})),r.d(t,"l",(function(){return f}));var n=r(4);const o=Object(n.create)({checkTypes:!1,env:n.env}),a=e=>e.offsetHeight+parseInt(getComputedStyle(e).marginTop)+parseInt(getComputedStyle(e).marginBottom),c=e=>t=>{if(null==t)throw new Error(e);return t},i=e=>{if(e instanceof HTMLElement)return e;throw new Error(`${e.toString()} not an HTMLElement`)},l=e=>t=>o.pipe([e,c(`No relative for ${t.toString()}`),i])(t),s=l(e=>e.parentNode),u=e=>{s(e).removeChild(e)},d=e=>c(`Missing required element corresponding to selector ${e}`)(document.querySelector(e)),p=new Promise((e,t)=>document.addEventListener("DOMContentLoaded",()=>{e()})),m=(e,t)=>new Promise((r,n)=>{let o,a;const c=n=>{null==o&&(o=n),(a=(n-o)/e)<=1?(t(a),requestAnimationFrame(c)):(t(1),r())};requestAnimationFrame(c)}),h=e=>Array.from(new Set(e).values()),f=e=>o.pipe([o.map(JSON.stringify),o.map(c("Failed to stringify")),h,o.map(JSON.parse)])(e),y=e=>null==e?o.Nothing:o.Just(e)},164:function(e,t,r){"use strict";r.r(t);var n=r(4),o=r(1);const a=Object(n.create)({checkTypes:!1,env:n.env}),c=e=>{const t=Object(o.h)(e=>e.closest('[type="menu"]'))(e);return Object(o.d)("#"+t.dataset.menu)},i=e=>{switch(e.tag){case"HR":return document.createElement("hr");case"MENUITEM":{const t=document.createElement("li");return t.textContent=e.label,t.setAttribute("type",e.type),e.active?t.setAttribute("checked","checked"):t.removeAttribute("checked"),t}default:throw e.tag,new Error(e.toString())}},l=e=>{switch(e.tag){case"CLOSED":return null;case"OPEN":{const t=document.createElement("ul");return t.classList.add("menu"),a.map(a.pipe([i,e=>t.appendChild(e)]))(e.items),t}default:throw e.tag,new Error(e.toString())}},s=e=>"true"===e.dataset.active?{tag:"CLOSED"}:{tag:"OPEN",items:a.map(e=>(e=>{switch(e.tagName){case"HR":return{tag:"HR"};case"MENUITEM":return{tag:"MENUITEM",label:Object(o.c)(`Missing label for ${e.toString()}`)(e.getAttribute("label")),type:Object(o.c)(`Missing type for ${e.toString()}`)(e.getAttribute("type")),active:"checked"===e.getAttribute("checked")};default:throw new Error(e.toString())}})(e))(Array.from(e.querySelectorAll("menuitem, hr")))},u=e=>{switch(e.tag){case"MENUCLICK":a.pipe([s,l,o.j,a.maybe_(()=>{document.querySelectorAll("ul.menu").forEach(o.i),e.menu.dataset.active="false"})(t=>{e.menu.appendChild(t),e.menu.dataset.active="true"})])(e.menu);break;case"ITEMSELECT":document.querySelectorAll("ul.menu").forEach(o.i),e.menu.dataset.active="false",a.map(e=>e.removeAttribute("checked"))(Array.from(e.menu.children)),e.item.setAttribute("checked","checked")}},d=e=>{if(e.stopPropagation(),["TEXTAREA","BUTTON","INPUT","OPTION","SELECT","DETAILS","SUMMARY","A"].some(t=>Object(o.a)(e.target).nodeName===t))return;const t=c(Object(o.a)(e.target));return(e=>"MENU"===e.tagName&&"popup"===e.getAttribute("type"))(t)&&u({tag:"MENUCLICK",menu:t}),!1};o.b.then(()=>{const e=new URLSearchParams(location.search);document.querySelectorAll("menu").forEach(t=>{const r=e.get(t.id);if(null!=r){const e=Object(o.h)(e=>e.querySelector(`[label="${r}"]`))(t);u({tag:"ITEMSELECT",menu:t,item:e})}}),document.querySelectorAll('[type="menu"]').forEach(e=>{e.addEventListener("click",d)})});var p=c,m=e=>{if("radio"===e.getAttribute("type")){const t=Object(o.h)(e=>e.closest("menu"))(e),r=Object(o.c)(`No text for ${e.toString()}`)(e.innerText),n=Object(o.h)(e=>e.querySelector(`[label="${r}"]`))(t);u({tag:"ITEMSELECT",menu:t,item:n})}};const h=Object(n.create)({checkTypes:!1,env:n.env}),f=e=>h.pipe([e=>e.querySelectorAll("a"),Array.from,h.last,h.map(e=>e.getAttribute("href")),h.chain(o.j),h.map(e=>Object(o.d)("#"+e.slice(1))),h.maybeToNullable])(e),y=e=>{const t=e.offsetParent;if(t instanceof HTMLElement)return"MAIN"===t.tagName?e.offsetTop:e.offsetTop+y(t);throw new Error("Expected an `offsetParent`:"+e.outerHTML)},b=()=>{h.reduce(e=>t=>{const r=Object(o.c)(`No referrer for ${t.toString()}`)(f(t)),n=Object(o.h)(e=>e.previousElementSibling)(r),a=h.max(y(n))(e);return t.style.top=a+"px",a+Object(o.f)(t)})(0)(Array.from(document.querySelectorAll(".sidenote:not(#warnings)")))},g=()=>{document.querySelectorAll(".footnotes").forEach(e=>{e.style.display="none"}),document.querySelectorAll("details").forEach(e=>E.observe(e,{attributes:!0})),document.querySelectorAll(".sidenote:not(#warnings)").forEach(o.i),document.querySelectorAll(".footnotes > ol > li").forEach(e=>{const t=f(e);if(null!=t){const r=Object(o.h)(e=>e.previousElementSibling)(t);if("none"!==getComputedStyle(r).display){const t=r.closest("p");(null==t?r:t).insertAdjacentHTML("beforebegin",'<aside class="sidenote">'+e.innerHTML+"</aside>")}}}),document.querySelectorAll(".noted").forEach(e=>{Object(o.h)(e=>e.nextElementSibling)(e).style.display="none"}),document.querySelectorAll(".sidenote").forEach(h.pipe([e=>e.querySelectorAll("a"),Array.from,h.last,h.map(e=>{e.style.display="none"})]))},E=new MutationObserver(b),S=h.pipe([getComputedStyle,e=>e["font-size"],Number.parseFloat]),w=()=>{window.innerWidth/parseFloat(S(Object(o.d)("html")))>60?(g(),document.fonts.ready.then(b),MathJax.Hub.Queue(()=>{b()})):(E.disconnect(),document.querySelectorAll(".sidenote:not(#warnings)").forEach(o.i),document.querySelectorAll(".noted").forEach(e=>{Object(o.h)(e=>e.nextElementSibling)(e).style.display=""}),document.querySelectorAll(".footnotes").forEach(e=>{e.style.display=""}))};o.b.then(()=>{document.querySelector(".disable-sidenotes")||(w(),window.addEventListener("resize",w))});var v=g,A=b;const O=Object(n.create)({checkTypes:!1,env:n.env}),j=O.pipe([getComputedStyle,e=>e.height,Number.parseFloat]),M=e=>(t,r)=>{switch(e.tag){case"INVISIBLEPARENT":e.from.classList.remove("open"),e.to.classList.add("open"),t();break;case"SELECTEDOPEN":t();break;case"SELECTEDNEWVISIBLE":{const r=e,n=j(r.parent),a=300,c=()=>Promise.resolve().then(()=>{const e=((e,t)=>r=>(t-e)*r+e)(n,j(r.parent));return Object(o.e)(a,t=>{r.parent.style.height=e(t)+"px"})}),i=()=>Promise.resolve().then(()=>(r.to.style.opacity="0",r.to.classList.add("open"),Object(o.e)(a,e=>{r.to.style.opacity=e.toString()}))),l=()=>{r.parent.removeAttribute("style"),r.from.removeAttribute("style"),r.to.removeAttribute("style")};(()=>Object(o.e)(a,e=>{r.from.style.opacity=(1-e).toString()}).then(()=>{r.from.style.opacity="0",r.from.classList.remove("open")}))().then(()=>Promise.all([i(),c()])).then(l).then(t);break}default:throw e.tag,new Error(`Unexpected tag in ${e}`)}},L=e=>O.pipe([o.g,o.j,O.map(e=>e.children),O.map(Array.from),O.map(t=>t.findIndex(t=>t===e)),O.fromMaybe(-1)])(e),T=e=>{const t=Object(o.a)(e.target),r=Object(o.h)(e=>e.closest("menu"))(t);return O.map(e=>{const r=Object(o.h)(e=>e.children[L(t)])(e),n=Object(o.g)(r),a=Object(o.h)(e=>e.querySelector(".open"))(n),c=r.classList.contains("open")?{tag:"SELECTEDOPEN"}:"none"!==getComputedStyle(n).display?{tag:"SELECTEDNEWVISIBLE",from:a,to:r,parent:n}:{tag:"INVISIBLEPARENT",from:a,to:r};new Promise(M(c)).then(()=>{v(),A()})})(Array.from(document.querySelectorAll(`[data-menu="${r.id}"]`))),m(t),!1};o.b.then(()=>{const e=new URLSearchParams(location.search);document.querySelectorAll('[type="menu"]').forEach(t=>{const r=t.dataset.menu,n=e.get(r);if(null!=n){const e=Object(o.h)(e=>e.querySelector(`[label="${n}"]`))(Object(o.d)("#"+r)),a=Object(o.h)(e=>e.querySelector(".open"))(t),c=Object(o.h)(t=>t.children[L(e)])(t);new Promise(M({tag:"INVISIBLEPARENT",from:a,to:c})).then(()=>{v(),A()})}});const t=Array.from(document.querySelectorAll('[type="menu"]'));O.map(e=>{e.addEventListener("click",({pageY:e,pageX:t,target:r})=>{const n=p(Object(o.a)(r)),a=Object(o.j)(n.querySelector("ul.menu"));O.map(r=>{const n=Object(o.d)("main");r.style.left=t-n.offsetLeft+"px",r.style.top=e-n.offsetTop+"px",Array.from(r.children).forEach(e=>e.removeEventListener("click",T)),Array.from(r.children).forEach(e=>e.addEventListener("click",T))})(a)})})(t),MathJax.Hub.Queue(()=>{document.querySelectorAll(".MathJax_MathContainer").forEach(e=>{getComputedStyle(e).display="inline"}),document.querySelectorAll(".MathJax_MathContainer > span").forEach(e=>{getComputedStyle(e).display="inline"});const e=document.querySelectorAll(".switch.inline > li.open");e.forEach(e=>{getComputedStyle(e).display="inline-block"}),O.pipe([Array.from,O.head,O.map(e=>e.getBoundingClientRect())])(e),e.forEach(e=>{getComputedStyle(e).display="inline",e.removeAttribute("style")})})});const N=(e,t,r,n)=>{const o=((e,t)=>Math.hypot(e.x-t.x,e.y-t.y))(r,n)/Math.sin(Math.abs(t-e)/2)/2;return{radius:o,center:q(r,o,e+Math.PI)}},q=({x:e,y:t},r,n)=>({x:e+Math.cos(n)*r,y:t+Math.sin(n)*r}),x=Object(n.create)({checkTypes:!1,env:n.env}),C=x.pipe([getComputedStyle,e=>e.height,Number.parseFloat]),I=e=>t=>x.pipe([o.g,e=>e.querySelectorAll(t),Array.from,x.head,x.fromMaybe_(()=>{throw new Error(`No prev element for ${e.toString()}`)})])(e),k=e=>t=>x.pipe([o.g,e=>e.querySelectorAll(t),Array.from,x.dropWhile(t=>t!==e),x.tail,x.chain(x.head),x.fromMaybe_(()=>{throw new Error(`No next element for ${e.toString()}`)})])(e),P=(e,t)=>(r,n)=>{const a=x.map(o.a)((e=>t=>x.pipe([o.g,e=>e.children,Array.from,x.dropWhile(t=>t!==e),x.tail,x.fromMaybe([]),x.takeWhile(e=>e!==t)])(e))(e)(t)),{bottomToTop:c,between:i,topToBottom:l}=((e,t)=>{const r=e.getBoundingClientRect().top-t.getBoundingClientRect().top,n=C(t)-C(e);return{bottomToTop:r,between:n,topToBottom:t.getBoundingClientRect().top-e.getBoundingClientRect().top+n}})(e,t),s=Math.PI/4,u=e=>{const t=e<=0?Math.PI+s:s,{center:r,radius:n}=N(t,t-2*s,{x:0,y:0},{x:0,y:e});return e=>{const{x:o,y:a}=q(r,n,t-2*s*e);return`translate(${o}px, ${-a}px)`}},d=u(l),p=u(c),m=u(i);Promise.all([Object(o.e)(300,t=>{e.style.transform=d(t)}).then(()=>e.removeAttribute("style")),Object(o.e)(300,e=>{t.style.transform=p(e)}).then(()=>t.removeAttribute("style")),Object(o.e)(300,e=>a.forEach(t=>{t.style.transform=m(e)})).then(()=>a.forEach(e=>e.removeAttribute("style")))]).then(r)},B=function(){const e=Object(o.g)(this),t="."+Array.from(e.classList).join("."),[r,n]="swap-down"===this.getAttribute("class")?[e,k(e)(t)]:[I(e)(t),e];new Promise(P(r,n)).then(()=>{_(r,n),A(),document.querySelectorAll(".swap-up, .swap-down").forEach(o.i),H()})},_=(e,t)=>{const r=Object(o.h)(e=>e.nextElementSibling)(e);r===t?(Object(o.g)(t).insertBefore(e,t),Object(o.g)(e).insertBefore(t,e)):(Object(o.g)(t).insertBefore(e,t),Object(o.g)(r).insertBefore(t,r))},H=()=>{const e=document.createElement("span");e.classList.add("swap-up");const t=document.createElement("span");t.classList.add("swap-down");const r=document.querySelectorAll(".swap");x.groupBy(x.on(x.equals)(e=>e.className))(Array.from(r)).forEach(r=>{x.pipe([x.tail,x.map(x.map(t=>t.insertBefore(e.cloneNode(!0),t.firstChild)))])(r),x.pipe([x.init,x.map(x.map(e=>e.appendChild(t.cloneNode(!0))))])(r)}),document.querySelectorAll(".swap-up, .swap-down").forEach(e=>e.addEventListener("click",B))};o.b.then(H);const R=Object(n.create)({checkTypes:!1,env:n.env}),$=R.curry2((e,t)=>R.fromMaybe(t)(R.stripPrefix(e)(t))),D=R.pipe([R.splitOnRegex(/\.|\?/g),R.drop(2),R.chain(R.head),R.fromMaybe_(()=>{throw new Error("Expect ref title to be in third sentence.")}),R.trim,$("“")]),U=e=>R.pipe([e=>e.getAttribute("href"),o.j,R.fromMaybe_(()=>{throw new Error("Expected citation to have link: "+e.outerHTML)}),R.stripPrefix("#"),R.fromMaybe_(()=>{throw new Error("Expected citation link to be an anchor: "+e.outerHTML)})])(e),J=e=>R.pipe([t=>R.find(e=>e.getAttribute("id")===t)(e),R.fromMaybe_(()=>{throw new Error("Expect every citation to have corresponding reference")})]);o.b.then(()=>{const e=Array.from(document.querySelectorAll(".citation")),t=e.map(e=>R.pipe([e=>e.querySelector("a"),o.j,R.fromMaybe_(()=>{throw new Error("Expected citation to have link: "+e.outerHTML)})])(e)),r=Array.from(document.querySelectorAll("#refs > div"));console.assert(e.length===t.length,"Citation length mismatch"),(e=>{e.forEach(e=>{const t=R.fst(e),r=R.snd(e);t.setAttribute("data-balloon",r),t.setAttribute("data-balloon-pos","up"),t.setAttribute("data-balloon-length","large")})})(R.zip(e)(((e,t)=>R.map(R.pipe([U,J(t),e=>e.textContent,D]))(e))(t,r)))});const W=Object(n.create)({checkTypes:!1,env:n.env});let F;const Y=e=>e=>{if(void 0===F)return F=window.scrollY,{tag:"InitialLoad",entries:e};{const t=window.scrollY>=F?"Down":"Up";return F=window.scrollY,{tag:"Scroll",direction:t,entries:e}}},V=W.pipe([e=>e.entries,W.filter(e=>!e.isIntersecting),W.last,W.maybe({tag:"DoNothing"})(e=>({tag:"SetBreadcrumb",target:e.target}))]),z=e=>t=>{switch(t.tag){case"InitialLoad":return(e=>t=>W.pipe([W.filter(e=>e.getBoundingClientRect().top<0),W.last,W.maybe({tag:"DoNothing"})(e=>({tag:"SetBreadcrumb",target:e}))])(e))(e)(t);case"Scroll":switch(t.direction){case"Up":return(e=>W.pipe([e=>e.entries,W.filter(e=>e.isIntersecting),W.head,W.map(e=>e.target),W.map(t=>e.findIndex(e=>e===t)),W.maybe({tag:"DoNothing"})(t=>0===t?{tag:"DeleteBreadcrumbs"}:{tag:"SetBreadcrumb",target:e[t-1]})]))(e)(t);case"Down":return V(t);default:throw t.direction.tag,new Error(t.toString())}default:throw t.direction,new Error(t.toString())}},K=e=>t=>{switch(t.tag){case"SetBreadcrumb":X().innerHTML=Z(ee(e)(t.target));break;case"DeleteBreadcrumbs":Q()}},Q=()=>{W.pipe([o.j,W.map(e=>{e.outerHTML=""})])(document.getElementById("article-breadcrumb"))},X=()=>W.pipe([o.j,W.fromMaybe_(G)])(document.querySelector("#article-breadcrumb")),G=()=>{const e=document.createElement("div");return e.id="article-breadcrumb",W.pipe([o.j,W.fromMaybe_(()=>{throw new Error("<article> must exist")}),t=>t.appendChild(e)])(document.querySelector("article")),e},Z=W.pipe([e=>Array.from(e.entries()),W.sort,W.map(([e,t])=>t.innerText),e=>e.join(" ⊃ ")]),ee=e=>W.pipe([t=>[t,W.takeWhile(e=>e!==t)(e)],([e,t])=>[e,W.filter(t=>t.tagName<e.tagName)(t)],([e,t])=>W.append(e)(t),e=>new Map(W.map(e=>[e.tagName,e])(e))]);o.b.then(()=>{const e=Array.from(document.querySelectorAll("h3:not(#article-subtitle), h4, h5, h6")),t=new IntersectionObserver(te(e),{threshold:0});e.forEach(e=>t.observe(e))});const te=e=>W.pipe([Y(),z(e),K(e)]),re=()=>{Object(o.d)("#underlay").classList.remove("inactive");const e=Object(o.d)("#overlay");e.classList.add("inactive"),e.style.overflowY="unset",history.replaceState(null,"",window.location.pathname)},ne=()=>{Object(o.d)("#underlay").classList.add("inactive");const e=Object(o.d)("#overlay");e.classList.remove("inactive"),e.addEventListener("click",re),e.style.overflowY="scroll"};o.b.then(()=>{location.hash.endsWith("key-terms")&&ne(),window.addEventListener("hashchange",()=>{location.hash.endsWith("key-terms")&&ne()},!1)})}});